<!DOCTYPE html>
<html lang="en" style="background: #ffffff;">
  <head>
    <style type="text/css">
      :root {
        --white: {{{account.colors.gallery-white}}};
        --black: {{{account.colors.industrial-black}}};

        --outdoors-blue: {{{account.colors.great-outdoors-blue}}};
        --peoples-pink: {{{account.colors.people-s-pink}}};
        --seven-hils-green: {{{account.colors.seven-hills-green}}};
        --vibrant-red: {{{account.colors.vibrant-red}}};
        --jersey-yellow: {{{account.colors.jersey-yellow}}};
        --bog-cotton: {{{account.colors.bag-cotton}}}; 

        --start-up-orange: {{{account.colors.start-up-orange}}};        
        --industrial-black: {{{account.colors.industrial-black}}};
        --galery-white: {{{account.colors.gallery-white}}};
        --misty-gray: {{{account.colors.misty-grey}}};

        --default: var(--seven-hils-green);
        --invest: var(--outdoors-blue);
        --conference: var(--peoples-pink);
        --business: var(--start-up-orange);
      }

      html {
        font-size: 100px !important;
      }      
    </style>
    <link type="text/css" rel="stylesheet" href="global.css" />
    <link type="text/css" rel="stylesheet" href="main.css" />
    <style type="text/css">

      .bg-1 {
        background-color: var(--{{{SHF_branding-option--lt1}}});
      }

      .text {
        color: var(--{{{Text-Colour}}}{{^Text-Colour}}white{{/Text-Colour}});
      }

      .layoutSize--instagram.bg-1 {
        padding: 5% 5% 12.5%;
      } 

      .layoutSize--facebook.bg-1 {
        padding: 3% 5% 9%;
      }

      .layoutSize--twitter-post.bg-1 {
        padding: 4% 5% 9%;
      }

      .layoutSize--linkedin.bg-1 {
        padding: 5% 5% 8%;
      }

      .layoutSize--twitter-cover-photo.bg-1 {
        padding: 3% 5% 7%;
      }

    </style>
  </head>

  <body>
    <div class="page {{{IS-Location-Theme}}} stencil-yes">
      <div class="bleed">
        <div class="fit wrapper">
          <div class="bg-0">{{{IS-Background}}}</div>
          {{#IS-Text}}
          <div class="bg-1 layoutSize--{{SHF_layout-size--lt1}}">
            <div class="text">
              <div class="text__inner textFit--vertical bg-{{{SHF_branding-option--lt1}}}" style="line-height:{{SCC_line-spacing--iglt1i}}em";>{{{IS-Text}}}</div><!--text__inner-->
            </div>
            <div class="cobrands">
              {{#Cobrand-Logo-1}}<img src="{{{Cobrand-Logo-1}}}" alt="" />{{/Cobrand-Logo-1}}
              {{#Cobrand-Logo-2}}<img src="{{{Cobrand-Logo-2}}}" alt="" />{{/Cobrand-Logo-2}}
              {{#Cobrand-Logo-3}}<img src="{{{Cobrand-Logo-3}}}" alt="" />{{/Cobrand-Logo-3}}
            </div>
          </div>
          {{/IS-Text}}
        </div>
        <div class="fit test contain .d-none"></div>
        <div class="fit boundary"></div>
      </div>
    </div>

    <script src="js/text-fit-min.js"></script>
    <script src="https://outfit-assets-production.s3-accelerate.amazonaws.com/scripts/textfit.0.0.4.min.js" type="text/javascript"></script>
    <script>
      const showCrop = '{{show-crop}}' === 'true';

      function cropMarks(showCrop) {
        if (showCrop) {
          document.querySelector('body').classList.add('crop');
        }

        Array.prototype.slice.call(document.querySelectorAll('.page')).forEach(function (page) {
          const parser = new DOMParser();
          const cropString = '<div class="crop-marks"><span class="cm1"></span><span class="cm2"></span><span class="cm3"></span><span class="cm4"></span></div>';
          const cropNode = parser.parseFromString(cropString, "text/html").body.firstChild;
          !!showCrop && page.insertBefore(cropNode, null);
        });
      }

      function getSize() {
        const vw = (showCrop ? window.innerWidth : window.innerWidth + 57.62) / 100;
        const vh = (showCrop ? window.innerHeight : window.innerHeight + 57.62) / 100;
        const vmin = Math.min(vw, vh);
        const vmax = Math.max(vw, vh);
        return (vmin * 2) + (vmax * 1.41891892) + (vh * 2);
      }

      function setSize() {
        const size = getSize();
        document.documentElement.style.fontSize = `${size}px`;
      };

      function heightObservable() {
        Array.prototype.slice.call(document.querySelectorAll('.box-limit .box-inner')).forEach(function (e) {
          checkHeight(e);
        });
      }

      function checkHeight(element) {
        const elementHeight = element.getBoundingClientRect().height;
        const parent = element.parentElement;
        const parentHeight = parent.getBoundingClientRect().height;

        if (elementHeight > parentHeight) {
          parent.classList.add('overflow');
        } else {
          parent.classList.remove('overflow');
        }
      }

      function specialWording(selector) {
        const elements = document.querySelectorAll(selector);
        Array.prototype.slice.call(elements).forEach(function (e) {
          if (!e.getElementsByClassName('txt-stencil').length) {
            const newHTML = e.innerHTML.replace(/sheffield/gi, '<span class="txt-stencil">$&</span>');          
            if (newHTML !== e.innerHTML) {            
              e.innerHTML = newHTML;
            }
          }
        });
      }

      cropMarks(showCrop);
      // setSize();

      specialWording('.stencil-yes .text p');

      window.addEventListener('resize', function () {
        // setSize();
      });

      window.addEventListener('load', function () {
        heightObservable();
      });


      window.addEventListener('DOMSubtreeModified', function () {
        specialWording('.stencil-yes .text__inner p');
        heightObservable();
      });    

      // TextFit function decreases the font of the selected element to make it fit in single line (if needed, uncomment the code bellow)
      TextFit.fit({
        selector: '.textFit--vertical',
        fitMode: 'vertical',
        alignItems: 'flex-start'
      });

    </script>
  </body>

</html>
